---
layout: post
keywords: 
description: 
title: kvm虚拟机增减磁盘 
categories: [虚拟化]
tags: [虚拟化,kvm]
group: archive
icon: code
featured: false
---

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 配置</a></li>
<li><a href="#sec-2">2 参考</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">配置</h2>
<div class="outline-text-2" id="text-1">




<pre class="example">#关闭虚拟机
virsh destroy machine
#创建新磁盘
qemu-img create -f qcow2 /home/wchunx/disk2.qcow2 $SIZE
#编辑VM配置
virsh edit machine
#添加以下字段
&lt;disk type='file' device='disk'&gt;
    &lt;source file='/home/wchunx/disk2.qcow2'/&gt;
    &lt;target dev='hdc' bus='ide'/&gt;
&lt;/disk&gt;
#退出编辑器，VM重新开机会自动加载新配置
virsh start machine
</pre>

</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">参考</h2>
<div class="outline-text-2" id="text-2">

<p><a href="http://serverfault.com/questions/244228/kvm-and-libvirt-how-to-configure-a-new-disc-device-to-an-existing-vm">KVM and libvirt: How to configure a new disc device to an existing VM?</a>
</p></div>
</div>
