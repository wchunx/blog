---
layout: post
keywords: 
description: 
title: Emacs杂记
categories: [Emacs]
tags: [Emacs]
group: archive
icon: compass
featured: false
---

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 为什么选择Emacs</a></li>
<li><a href="#sec-2">2 安装Emacs24.3.1</a>
<ul>
<li><a href="#sec-2-1">2.1 卸载Emacs23</a></li>
<li><a href="#sec-2-2">2.2 安装Emacs24.3.1</a></li>
<li><a href="#sec-2-3">2.3 参考资料</a></li>
<li><a href="#sec-2-4">2.4 相关问题</a></li>
</ul>
</li>
<li><a href="#sec-3">3 org-mode写jekyll代码高亮的问题</a>
<ul>
<li><a href="#sec-3-1">3.1 参考</a></li>
</ul>
</li>
<li><a href="#sec-4">4 安装和使用ecb</a>
<ul>
<li><a href="#sec-4-1">4.1 ecb布局</a></li>
<li><a href="#sec-4-2">4.2 参考资料</a></li>
</ul>
</li>
<li><a href="#sec-5">5 Emacs多窗口操作</a>
<ul>
<li><a href="#sec-5-1">5.1 典型的工作流</a></li>
<li><a href="#sec-5-2">5.2 将子窗口自动编号,然后按M-0…9跳转(最爱)</a></li>
<li><a href="#sec-5-3">5.3 undo/redo之前的窗口操作</a></li>
<li><a href="#sec-5-4">5.4 光标移动到下一窗口(常用)</a></li>
<li><a href="#sec-5-5">5.5 水平/垂直切分当前窗口(常用)</a></li>
<li><a href="#sec-5-6">5.6 将当前子窗口最大化(常用)</a></li>
<li><a href="#sec-5-7">5.7 删除当前子窗口(偶尔用)</a></li>
<li><a href="#sec-5-8">5.8 移动光标到上下左右的窗口(基本不用)</a></li>
<li><a href="#sec-5-9">5.9 存储/载入窗口布局到register(基本不用)</a>
<ul>
<li><a href="#sec-5-9-1">5.9.1 参考资料</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-6">6 Python环境配置</a>
<ul>
<li><a href="#sec-6-1">6.1 参考资料</a></li>
</ul>
</li>
<li><a href="#sec-7">7 GTD</a></li>
<li><a href="#sec-8">8 Emacs配置参考</a></li>
<li><a href="#sec-9">9 使用问题</a>
<ul>
<li><a href="#sec-9-1">9.1 flet和labels的warning</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">为什么选择Emacs</h2>
<div class="outline-text-2" id="text-1">

<p>因为好奇开始学习和折腾Emacs，慢慢习惯，现在已经舍不得了，最然现在还只是个初学者，传说的神奇还没有深切体会，但会继续学下去的。
</p></div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">安装Emacs24.3.1</h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">卸载Emacs23</h3>
<div class="outline-text-3" id="text-2-1">

<p>之前用的Emacs是Ubuntu12.04系统apt-get下来的，要安装Emacs24.3.1需要先卸载掉。
</p>


<pre class="src src-sh">sudo apt-get purge emacs23* emacs23-bin-common* emacs23-common* emacsen-common &amp;&amp; sudo apt-get autoremove
</pre>

</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2">安装Emacs24.3.1</h3>
<div class="outline-text-3" id="text-2-2">

<p>用相对比较便捷的PPA方式安装
</p>


<pre class="src src-sh">sudo add-apt-repository ppa:cassou/emacs
sudo apt-get update
sudo apt-get install emacs24 emacs24-el emacs24-common-non-dfsg
</pre>

</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3">参考资料</h3>
<div class="outline-text-3" id="text-2-3">

<p><a href="http://www.masteringemacs.org/articles/2013/03/11/whats-new-emacs-24-3/">What’s New in Emacs 24.3</a>
</p></div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4">相关问题</h3>
<div class="outline-text-3" id="text-2-4">

<p>安装Emacs24后，继续使用以前Emacs23的.emacs出现了点问题，记录如下
</p>
<p>
1.安装ELPA包管理器并安装扩展，Emacs启动报错“cannot open load file” for ~/.emacs.d/elpa/archives/-pkg
</p>
<p>
解决办法：touch ~/.emacs.d/elpa/archives/-pkg
</p>
<p>
2.启动Emacs报错Symbol's function definition is void: loop
</p>
<p>
解决办法：.emacs添加 (require 'cl) 
</p>
<p>
3.Emacs23中去掉工具栏菜单栏和滚动条的配置
</p>


<pre class="src src-elisp">(tool-bar-mode nil)  
(menu-bar-mode nil)  
(scroll-bar-mode nil)  
</pre>

<p>
Emacs24中上面的设置是无效的，需要改为
</p>


<pre class="src src-elisp">(tool-bar-mode 0)  
(menu-bar-mode 0)  
(scroll-bar-mode 0)  
</pre>


</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">org-mode写jekyll代码高亮的问题</h2>
<div class="outline-text-2" id="text-3">

<p>为了使输出的代码高亮，在.emacs中设置(setq org-export-htmlize-output-type 'inline-css) ，对于htmlize，这个变量如果设为css,则需要
下载一个css文件（比如 orgmode.org网站的css文件）才能着色，选择inline-css则依据emacs当前外观主题，下面为org-publish，添加defadvice，使得发布博客时使用whiteboard风格。
</p>



<pre class="src src-elisp">(<span style="color: #1c86ee;">defadvice</span> <span style="color: #cd9b1d;">org-publish</span> (around fsh-org-publish-advice
                                        (project <span style="color: #00688b;">&amp;optional</span> force async) activate)
  <span style="color: #cd853f;">"Change theme before publishing, for getting a good html code highlight style through</span>
<span style="color: #cd853f;">htmlize."</span>
  (<span style="color: #1c86ee;">let</span> ((thems custom-enabled-themes))
      (<span style="color: #1c86ee;">dolist</span> (theme thems)
        (disable-theme theme))
      (load-theme 'whiteboard)
      ad-do-it
      (disable-theme 'whiteboard)
      (<span style="color: #1c86ee;">dolist</span> (theme thems)
        (enable-theme theme))
      ))
</pre>


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1">参考</h3>
<div class="outline-text-3" id="text-3-1">

<p><a href="http://ar.newsmth.net/thread-8fac5033e0ec5a-1.html">org-mode 中引用代码片段时语法着色的问题</a>
</p>
<p>
<a href="http://fasheng.github.io/blog/2013-10-06-change-code-color-style-when-publish-org-mode-to-html.html">设置org-mode导出为html时的代码高亮风格</a>
</p></div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">安装和使用ecb</h2>
<div class="outline-text-2" id="text-4">

<p>ecb是emacs中的代码浏览工具，依赖cedet。之前写过一篇<a href="http://localhost:4000/emacs/2013/10/19/Emacs-cedet-ecb/"> 安装cedet和ecb</a>的文章，手动安装的cedet和ecb。
</p>
<p>
<a href="http://alexott.blogspot.de/2012/06/ecb-fresh-emacscedet.html">这篇文章</a> 作者对ecb做了些改动，我clone下来试用发现跟Emacs24.3.1内置的cedet兼容良好。省去了手动安装cedet的过程，而且感觉emacs启动也快了些。下面是安装过程：
</p>


<pre class="src src-sh"><span style="color: #cd6600;">cd</span> ~/.emacs.d/plugins/
git clone https://github.com/alexott/ecb/
</pre>

<p>
init.el中关于ecb的配置
</p>


<pre class="src src-sh">;;cedet
(require <span style="color: #8b7355;">'semantic)</span>
<span style="color: #8b7355;">(require '</span>semantic/sb)
(require <span style="color: #8b7355;">'srecode)</span>
<span style="color: #8b7355;">(global-ede-mode 1)</span>
<span style="color: #8b7355;">(semantic-mode 1)</span>
<span style="color: #8b7355;">;;ecb</span>
<span style="color: #8b7355;">(add-to-list '</span>load-path <span style="color: #8b7355;">"~/.emacs.d/plugins/ecb"</span>)
(require <span style="color: #8b7355;">'ecb)</span>
<span style="color: #8b7355;">(setq stack-trace-on-error nil)</span>
<span style="color: #8b7355;">;;&#40736;&#26631;&#25903;&#25345;&#65306;Emacs&#20013;&#25191;&#34892;&#8220;M-x ecb-customize-most-important&#8221;&#65292;&#25214;&#21040;&#8220;Ecb Primary Secondary Mouse Buttons&#8221;&#36873;&#39033;&#65292;&#23558;&#20854;&#35774;&#20026;&#8220;Primary: mouse-1, secondary: mouse-2&#8221;&#65292;&#24182;&#19988;&gt;&#20197;&#8220;Save for Future Sessions&#8221;&#20445;&#23384;&#12290;</span>
<span style="color: #8b7355;">;;&#33258;&#21160;&#21551;&#21160;ecb</span>
<span style="color: #8b7355;">;; (setq ecb-auto-activate t)</span>
<span style="color: #8b7355;">;;F7:&#25171;&#24320;ecb</span>
<span style="color: #8b7355;">(global-set-key  [(f7)] '</span>ecb-activate)
;;F8:&#20851;&#38381;ecb
(global-set-key  [(f8)] <span style="color: #8b7355;">'ecb-deactivate)</span>
<span style="color: #8b7355;">;;&#20851;&#38381;ecb&#21551;&#21160;&#31383;&#21475;</span>
<span style="color: #8b7355;">(setq ecb-tip-of-the-day nil)</span>
</pre>


</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1">ecb布局</h3>
<div class="outline-text-3" id="text-4-1">

<p><a href="http://blog.yxwang.me/2010/02/bind-cscope-to-ecb/">ecb和cscope的结合使用</a> <br/>
<a href="http://utkarshsengar.com/2011/06/emacs-python/">My emacs setup for python dev</a> <br/>
</p></div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2">参考资料</h3>
<div class="outline-text-3" id="text-4-2">

<p>关于内置cedet的配置这几篇介绍不错 <br/>
<a href="http://stackoverflow.com/questions/8038114/emacs-24-builtin-cedet-function-highlight">http://stackoverflow.com/questions/8038114/emacs-24-builtin-cedet-function-highlight</a> <br/>
<a href="http://www.cnblogs.com/zfreay#sec-2.2">http://www.cnblogs.com/zfreay#sec-2.2</a> <br/>
<a href="http://emacser.com/built-in-cedet.htm">http://emacser.com/built-in-cedet.htm</a>
</p>
<p>
cedet的详细说明 <br/>
<a href="http://cxwangyi.wordpress.com/2010/08/21/using-cedet-with-emacs/">http://cxwangyi.wordpress.com/2010/08/21/using-cedet-with-emacs/</a> <br/>
<a href="http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html">http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html</a>
</p>
<p>
<a href="http://jinganglang777.blog.163.com/blog/static/790854972012127104446221/">让Emacs功能强于Source Insight</a> <br/>
<a href="http://www.wolinlabs.com/blog/emacs.global.speedbar.html">Code Browsing with Emacs, GLOBAL, and Speedbar</a>
</p></div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">Emacs多窗口操作</h2>
<div class="outline-text-2" id="text-5">


</div>

<div id="outline-container-5-1" class="outline-3">
<h3 id="sec-5-1">典型的工作流</h3>
<div class="outline-text-3" id="text-5-1">

<ol>
<li>在两个子窗口中对比文件内容
</li>
<li>打开更多的窗口以参考其他信息.
</li>
<li>对某个窗口内容比较有兴趣,跳转到该窗口,将该窗口最大化
</li>
<li>看完最大化的窗口内容后,undo最大化操作,重新回到早先的多个小窗口模式以便继续纵览全局
</li>
</ol>

</div>

</div>

<div id="outline-container-5-2" class="outline-3">
<h3 id="sec-5-2">将子窗口自动编号,然后按M-0…9跳转(最爱)</h3>
<div class="outline-text-3" id="text-5-2">

<p>安装<a href="https://github.com/nschum/window-numbering.el">window-numbering.el</a> ,然后在.emacs中添加以下代码,
</p>


<pre class="src src-sh">(require <span style="color: #8b7355;">'window-numbering)</span>
<span style="color: #8b7355;">(window-numbering-mode 1)</span>
</pre>

</div>

</div>

<div id="outline-container-5-3" class="outline-3">
<h3 id="sec-5-3">undo/redo之前的窗口操作</h3>
<div class="outline-text-3" id="text-5-3">

<p>使用winer-mode,默认C-c &lt;left&gt;和C-c &lt;right&gt;来对窗口布局实现undo/redo, .emacs中添加
</p>


<pre class="src src-sh">(winner-mode t)
</pre>

</div>

</div>

<div id="outline-container-5-4" class="outline-3">
<h3 id="sec-5-4">光标移动到下一窗口(常用)</h3>
<div class="outline-text-3" id="text-5-4">

<p>M-x other-window,快捷键是`C-x o`.
</p></div>

</div>

<div id="outline-container-5-5" class="outline-3">
<h3 id="sec-5-5">水平/垂直切分当前窗口(常用)</h3>
<div class="outline-text-3" id="text-5-5">

<p>快捷键C-x 2/3
</p></div>

</div>

<div id="outline-container-5-6" class="outline-3">
<h3 id="sec-5-6">将当前子窗口最大化(常用)</h3>
<div class="outline-text-3" id="text-5-6">

<p>M-x delete-other-windows,快捷键`C-x 1`.
</p></div>

</div>

<div id="outline-container-5-7" class="outline-3">
<h3 id="sec-5-7">删除当前子窗口(偶尔用)</h3>
<div class="outline-text-3" id="text-5-7">

<p>M-x delete-window,快捷键`C-x 0`.
</p></div>

</div>

<div id="outline-container-5-8" class="outline-3">
<h3 id="sec-5-8">移动光标到上下左右的窗口(基本不用)</h3>
<div class="outline-text-3" id="text-5-8">

<p>因我较喜欢vi快捷键,所以我安装了Evil Mode.快捷键和Vi一样.C-w h/j/k/l移动至各方向的子窗口.
</p></div>

</div>

<div id="outline-container-5-9" class="outline-3">
<h3 id="sec-5-9">存储/载入窗口布局到register(基本不用)</h3>
<div class="outline-text-3" id="text-5-9">

<p>`C-x r w &lt;register&gt;`存储,`C-x r j &lt;register&gt;`载入.
</p>
</div>

<div id="outline-container-5-9-1" class="outline-4">
<h4 id="sec-5-9-1">参考资料</h4>
<div class="outline-text-4" id="text-5-9-1">

<p><a href="http://blog.csdn.net/redguardtoo/article/details/7768233">Emacs中的完美多窗口操作 </a>
</p>
<p>
<a href="http://www.cnblogs.com/bamanzi/archive/2011/08/20/some-emacs-window-utils.html">Emacs窗口管理几个好东东</a>
</p></div>
</div>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6">Python环境配置</h2>
<div class="outline-text-2" id="text-6">


</div>

<div id="outline-container-6-1" class="outline-3">
<h3 id="sec-6-1">参考资料</h3>
<div class="outline-text-3" id="text-6-1">

<p><a href="http://tkf.github.io/emacs-jedi/">主要参考1</a> <br/>
<a href="http://caisah.info/emacs-for-python/">主要参考2</a> <br/>
<a href="https://code.djangoproject.com/wiki/Emacs">django配置</a> <br/>
<a href="http://jack-kelly.com/setting_up_emacs_for_python_development">Setting up Emacs for Python development </a> <br/>
</p></div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7"><a href="http://cnlox.is-programmer.com/posts/10354.html">GTD</a></h2>
<div class="outline-text-2" id="text-7">

</div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8">Emacs配置参考</h2>
<div class="outline-text-2" id="text-8">

<p><a href="http://www.cinsk.org/emacs/emacs-artist.html">Emacs画图Artist Mode</a> <br/>
<a href="http://lifegoo.pluskid.org/wiki/Emacs.html">星黎殿</a> <br/>
<a href="http://forum.ubuntu.org.cn/viewtopic.php?t=136768">emacs推广，配置详细介绍</a> <br/>
<a href="http://blog.csdn.net/jinzhuojun/article/details/1786451">程序员的emacs配置大全(cedet+ecb+cscope+gdb-ui)-jzj </a>
</p>


</div>

</div>

<div id="outline-container-9" class="outline-2">
<h2 id="sec-9">使用问题</h2>
<div class="outline-text-2" id="text-9">


</div>

<div id="outline-container-9-1" class="outline-3">
<h3 id="sec-9-1">flet和labels的warning</h3>
<div class="outline-text-3" id="text-9-1">

<p>装完auto-compute，启动emacs总会出下面两条warning
</p>


<pre class="src src-sh"><span style="color: #ff00ff;">`flet' is an obsolete macro (as of 24.3); use either `</span>cl-flet<span style="color: #8b7355;">' or `cl-letf'</span>.
<span style="color: #ff00ff;">`labels' is an obsolete macro (as of 24.3); use `</span>cl-labels<span style="color: #8b7355;">' instead.</span>
</pre>

<p>
<a href="http://ergoemacs.org/emacs/emacs_24_common_lisp_package_name_change.html">这里</a> 有点介绍.
</p></div>
</div>
</div>
